<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-svg lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]><html class="no-svg lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]><html class="no-svg lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--><html lang="en"><!--<![endif]-->

<head>

	<meta charset="utf-8">
	
	<title>Provisioning Configuration | Washington State University</title>
	
	<!-- FAVICON -->
	<link rel="shortcut icon" href="https://repo.wsu.edu/spine/1/favicon.ico" />
	
	<!-- STYLESHEETS -->
	<link href="https://repo.wsu.edu/spine/1/spine.min.css" rel="stylesheet" type="text/css" />
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans" media="all">
	<!-- Your custom stylesheets here -->
	<link href="https://jeremyBass.github.io/server_builder/site/assests/css/git_styles.css" rel="stylesheet" type="text/css" />
	<!-- RESPOND -->
	<meta name="viewport" content="width=device-width, user-scalable=yes">
	
	<!-- SCRIPTS -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
	<script src="https://repo.wsu.edu/spine/1/spine.min.js"></script>
	<script src="https://jeremyBass.github.io/server_builder/site/assests/js/stickyfill.min.js"></script>
	<script src="https://jeremyBass.github.io/server_builder/site/assests/js/controller.js"></script>
	
	<!-- Your supplementary scripts here (jQuery Mobile, modernizr, site specific scripts, etcetera) -->
	
	<!-- COMPATIBILITY -->
	<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<noscript><style>#spine #spine-sitenav ul ul li { display: block !important; }</style></noscript>
	
	<!-- DOCS -->
	<link type="text/plain" rel="author" href="https://repo.wsu.edu/spine/1/authors.txt">
	<link type="text/html" rel="help" href="https://brand.wsu.edu">
	
	<!-- ANALYTICS -->
	<base href="https://jeremyBass.github.io/server_builder/"/> <!-- reminder make this a setting in sitemap -->
</head><body>
	<!-- WRAPPING -->
	<div id="jacket">
		<div id="binder" class="fluid max-1782 xlarge">
			<!-- CONTENT -->
			<main>
			<!-- Responsive Sections -->
			<section class="row side-right gutter pad short">
			
				<div class="column one">
					<article class="wrapper markdown-body">
					

<h1 id="server_builder-config-file">server_builder config file</h1>
<p>The config file is meant to make it where you don&#39;t ever have to edit any off the server provisioning options directly.  It also is compiled in to ways to allow the user to design the remote server to as close as possible to the local server.  Ideally you only have to provide the remote settings and you&#39;ll still get a working local development server.  Also since it&#39;s not versioned you get to keep all your secure data with in and just pass it to any of the other <code>app</code> repos use.</p>
<h3 id="example-basic-setup">Example basic setup</h3>
<p>The base provisioner it <code>salt</code> and we can pass in the envs used and pillar data. In the example below we are going to set up a basic server and call to have a user and set up the port as well as make sure the caching is off.</p>
<pre><code class="lang-json">{
    &quot;servers&quot;:{
        &quot;server2&quot;: {
            &quot;remote&quot;: {
                &quot;ip&quot;: &quot;10.255.255.3&quot;,
                &quot;salt&quot;:{
                    &quot;env&quot;: [
                        &quot;serverbase&quot;,
                        &quot;database&quot;,
                        &quot;security&quot;,
                        &quot;web&quot;,
                        &quot;webcaching&quot;
                    ],
                    &quot;pillars&quot;:{
                        &quot;mysql&quot;:{
                            &quot;users&quot;:{
                                &quot;username&quot;:&quot;foo&quot;,
                                &quot;passwd&quot;:&quot;bar&quot;
                            },
                            &quot;port&quot;:&quot;3360&quot;,
                            &quot;caching&quot;:&quot;false&quot;
                        }
                    }
                }
            }
        }
    }
}
</code></pre>
<h3 id="load-order">load order</h3>
<p>The config data is complied before it&#39;s used.  When you set up your config you will have the expanded data object laid out in two basic sections, <code>remote</code> and <code>vagrant</code> and there is a secoundary section, <code>apps</code>, that has another <code>remote</code> and <code>vagrant</code>.  The remote data is always expanded by the vagrant data.  The base server setting are expanded by the app settings.  What this means is that you can define only the remote server data object and you have also defined the vagrant settings as well.  If you want to alter the vagrant setting to be slightly different then the remote you have the ablitly to do so.  This give you the power to be as close as possible to the remote server in your local dev server with out having to alter any of the provisioning.  An example of this is:</p>
<pre><code class="lang-json">{
    &quot;servers&quot;:{
        &quot;server2&quot;: {
            &quot;remote&quot;: {
                &quot;ip&quot;: &quot;10.255.255.3&quot;,
                &quot;salt&quot;:{
                    &quot;env&quot;: [
                        &quot;serverbase&quot;,
                        &quot;database&quot;,
                        &quot;security&quot;,
                        &quot;web&quot;,
                        &quot;webcaching&quot;
                    ]
                }
            },
            &quot;vagrant&quot;: {
                &quot;salt&quot;:{
                    &quot;env&quot;: [
                        &quot;-webcaching&quot;
                    ]
                }
            }
        }
    }
}
</code></pre>
<p>In this set up we are setting up the environment for the remote but we are removing a value.  For this example we are not wanting to have web caching turned on for the dev server while doing normal devlopment.</p>
<p>To be clear the the data is compiled in this manner.</p>
<p><strong><em>[ remote + vagrant ] + [ app/remote + app/vagrant ] = [ final data object ]</em></strong></p>
<p>This also allows us to let an app load a new environment to the server object with out any need to alter the provisioning.  An example of that will be below.</p>
<h3 id="sample-usage">Sample usage</h3>
<pre><code class="lang-json">
{
    &quot;servers&quot;:{
        &quot;server2&quot;: {
            &quot;remote&quot;: {
                &quot;ip&quot;: &quot;10.255.255.3&quot;,
                &quot;salt&quot;:{
                    &quot;env&quot;: [
                        &quot;serverbase&quot;,
                        &quot;database&quot;,
                        &quot;security&quot;,
                        &quot;web&quot;,
                        &quot;webcaching&quot;
                    ],
                    pillars:{
                        mysql:{}
                    }
                }
            },
            &quot;vagrant&quot;: {
                &quot;hostname&quot;: &quot;web_app_block&quot;,
                &quot;memory&quot;: &quot;6144&quot;,
                &quot;vram&quot;: &quot;8&quot;,
                &quot;cores&quot;: &quot;2&quot;,
                &quot;host_64bit&quot;: &quot;false&quot;,
                &quot;minion&quot;: &quot;vagrant&quot;,
                &quot;verbose_output&quot;: &quot;true&quot;,
                &quot;shared_folders&quot;: {
                    &quot;/var/app&quot;: {
                        &quot;dest&quot;: &quot;/var/app&quot;,
                        &quot;from&quot;: &quot;server/app&quot;,
                        &quot;user&quot;: &quot;uid=510,gid=510&quot;,
                        &quot;dmode&quot;: &quot;dmode=775&quot;,
                        &quot;fmode&quot;: &quot;fmode=774&quot;
                    }
                },
                &quot;salt&quot;:{
                    &quot;env&quot;: [
                        &quot;-webcaching&quot;
                    ],
                    pillars:{
                        mysql:{}
                    }
                }
            },
            &quot;apps&quot;: {
                &quot;store.wsu.edu&quot;: {
                    &quot;repo&quot;: &quot;-b master https://github.com/washingtonstateuniversity/WSUMAGE-base.git&quot;,
                    &quot;repoid&quot;: &quot;jeremyBass/WSUMAGE-base&quot;,
                    &quot;install_dir&quot;:&quot;stores&quot;,
                    &quot;remote&quot;: {
                        &quot;database_host&quot;: &quot;10.255.255.3&quot;,
                        &quot;sample_date&quot;: &quot;false&quot;,
                        &quot;hosts&quot;: [
                            &quot;store.mage.dev&quot;
                        ],
                        &quot;salt&quot;:{
                            &quot;env&quot;: [
                                &quot;serverbase&quot;,
                                &quot;database&quot;,
                                &quot;security&quot;,
                                &quot;web&quot;,
                                &quot;webcaching&quot;
                            ],
                            pillars:{
                                mysql:{}
                            }
                        }
                    },
                    &quot;vagrant&quot;: {
                        &quot;database_host&quot;: &quot;2&quot;,
                        &quot;sample_data&quot;: &quot;true&quot;,
                        &quot;hosts&quot;: [
                            &quot;store.mage.dev&quot;,
                            &quot;events.store.mage.dev&quot;,
                            &quot;student.store.mage.dev&quot;,
                            &quot;general.store.mage.dev&quot;,
                            &quot;store.admin.mage.dev&quot;,
                            &quot;tech.store.mage.dev&quot;
                        ],
                        &quot;salt&quot;:{
                            &quot;env&quot;: [
                                &quot;magento&quot;
                                &quot;-webcaching&quot;
                            ],
                            pillars:{
                                mysql:{},
                                magento:{}
                            }
                        }
                    }
                }
            }
        }
    }
}
</code></pre>

</article>
				</div><!--/column-->
			
				<div class="column two">
					<aside>
						<section>
						<h2 id="download-this-project">Download this project</h2>

<ul>
	<li> <a id="repo_github_link" href="https://github.com/jeremyBass/server_builder">View On GitHub</a> </li>
	<li> <a href="https://github.com/jeremyBass/server_builder/zipball/master">Download ZIP</a> </li>
	<li> <a href="https://github.com/jeremyBass/server_builder/tarball/master">Download TAR</a> </li>
</ul>

<p>This project is maintained by <a href="https://github.com/jeremyBass">jeremyBass</a>.  If you have found an issue please report it in the <a href="https://github.com/jeremyBass/server_builder/issues">repo issue list</a>.  </p>

</section>
					</aside>
				</div><!--/column-->
			</section>
			</main>
			<!-- /CONTENT -->
				<!-- SPINE -->
	<div id="spine" class="shelved">
		<div id="glue" class="spine-glue">
		
			<header class="spine-header">
				<a href="http://www.wsu.edu/" id="wsu-signature" class="spine-signature">Washington State University</a>
			</header>
			
			<!-- ACTIONS -->
			<section id="wsu-actions" class="spine-actions">
				<!-- Tabs -->
				<ul id="wsu-actions-tabs" class="spine-actions-tabs clearfix">
					<!--<li id="wsu-search-tab" class="spine-search-tab closed"><button>Search</button></li>
					This will be taken out for the mean time, but will add it back in later.
					-->
					<li id="wsu-contact-tab" class="spine-contact-tab closed"><button>Contact</button></li>
					<li id="wsu-share-tab" class="spine-share-tab closed"><button>Share</button></li>
					<li id="wsu-print-tab" class="spine-print-tab closed"><button>Print</button></li>
				</ul>
			</section><!--/#wsu-actions-->
	
			<nav id="spine-navigation" class="spine-navigation">
				<nav id="spine-sitenav" class="spine-sitenav">
					<ul>
					<li>
						<a href="site/under_the_hood.html" >Under The Hood</a>
								<ul>
							<li><a href="Overview">#how-does-this-function</a></li>
							<li><a href="Local">#when-local</a></li>
							<li><a href="Non Local">#when-non-local</a></li>
							
								</ul>
							
						</li>
					
					<li>
						<a href="site/server_project_conf.html" class="active" >Provisioning Configuration</a>
								<ul>
							
								</ul>
							
						</li>
					
					
						<li><a href="" >Main default</a></li>
					</ul>
				</nav>
				<nav id="spine-offsitenav" class="spine-offsitenav">
					<ul>
						<li><a href="//washingtonstateuniversity.github.io/WSU-Web-Serverbase/">WSU Server base</a></li>
					</ul>
				</nav>
			</nav><!-- #navigation -->
	
			<!-- Social and Global Links -->
			<footer class="spine-footer">
				<!--<nav id="wsu-social-channels" class="spine-social-channels">
					<ul>
						<li id="facebook"><a href="http://facebook.com/wsupullman">Facebook</a></li>
						<li id="twitter"><a href="http://twitter.com/wsupullman">Twitter</a></li>
						<li id="youtube"><a href="http://www.youtube.com/washingtonstateuniv">YouTube</a></li>
						<li id="directory"><a href="http://social.wsu.edu">Social</a></li>
					</ul>
				</nav>-->
				<nav id="wsu-global-links" class="spine-global-links">
					<ul>
						<li id="zzusis"><a href="https://my.wsu.edu/">my<strong>WSU</strong></a></li>
						<li id="access"><a href="https://oeo.wsu.edu/">Access</a></li>
						<li id="policies"><a href="https://policies.wsu.edu/">Policies</a></li>
						<li id="copyright"><a href="https://ucomm.wsu.edu/wsu-copyright-policy/">&copy;</a></li>
					</ul>
				</nav>	
				<!-- <small id="copyright"><a href="http://copyright.wsu.edu">&copy; Washington State University</a></small> -->
			</footer>
	
		</div><!--/glue-->
	</div><!--/spine-->
	<!-- /SPINE -->
</div><!--/cover-->
	</div><!--/jacket-->
	<!-- /WRAPPING -->
	
<!-- CONTACT INFO: Adjust the sample contact info below to reflect appropriate contact information. -->
<div id="contact-details" itemscope itemtype="http://schema.org/Organization"> 
	<span itemprop="department"  content="University Communications"></span> 
	<span itemprop="name" content="Washington State University"></span> 
	<div itemprop="address" itemscope itemtype="http://schema.org/PostalAddress">
		<span itemprop="location" content="ITB"></span>
		<span itemprop="streetAddress" content="ITB"></span>
		<span itemprop="addressLocality" content="Pullman"></span>
		<span itemprop="addressRegion" content="WA"></span>
		<span itemprop="postalCode" content="99164"></span>
	</div>
	<span itemprop="telephone" content="(509) 335-2700"></span>
	<span itemprop="email" content="web.support@wsu.edu"></span>
	<span itemprop="contactPoint" content="https://ucomm.wsu.edu/contact/"></span>
	<span itemprop="url" content="https://github.com/washingtonstateuniversity"></span>
</div>

<script type='text/javascript'>
  /* <![CDATA[ */
  var wsu_analytics = {
    "wsuglobal":{
      "unit_type":"office", 
      "unit":"finance-and-administration",
      "subunit":"information-services",
    },
    "site":{
      "ga_code":"UA-69906812-12"
    }
  };
  /* ]]> */
</script>
<script id="tracker_agent" src="https://repo.wsu.edu/jtrack/develop/bootstrap/bootstrap.min.js"></script></body>
</html>