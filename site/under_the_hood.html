<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-svg lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]><html class="no-svg lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]><html class="no-svg lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--><html lang="en"><!--<![endif]-->

<head>

	<meta charset="utf-8">
	
	<title>Under The Hood | Washington State University</title>
	
	<!-- FAVICON -->
	<link rel="shortcut icon" href="https://repo.wsu.edu/spine/1/favicon.ico" />
	
	<!-- STYLESHEETS -->
	<link href="https://repo.wsu.edu/spine/1/spine.min.css" rel="stylesheet" type="text/css" />
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans" media="all">
	<!-- Your custom stylesheets here -->
	<link href="https://jeremyBass.github.io/server_builder/site/assests/css/git_styles.css" rel="stylesheet" type="text/css" />
	<!-- RESPOND -->
	<meta name="viewport" content="width=device-width, user-scalable=yes">
	
	<!-- SCRIPTS -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
	<script src="https://repo.wsu.edu/spine/1/spine.min.js"></script>
	<script src="https://jeremyBass.github.io/server_builder/site/assests/js/stickyfill.min.js"></script>
	<script src="https://jeremyBass.github.io/server_builder/site/assests/js/controller.js"></script>
	
	<!-- Your supplementary scripts here (jQuery Mobile, modernizr, site specific scripts, etcetera) -->
	
	<!-- COMPATIBILITY -->
	<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<noscript><style>#spine #spine-sitenav ul ul li { display: block !important; }</style></noscript>
	
	<!-- DOCS -->
	<link type="text/plain" rel="author" href="https://repo.wsu.edu/spine/1/authors.txt">
	<link type="text/html" rel="help" href="https://brand.wsu.edu">
	
	<!-- ANALYTICS -->
	<base href="https://jeremyBass.github.io/server_builder/"/> <!-- reminder make this a setting in sitemap -->
</head><body>
	<!-- WRAPPING -->
	<div id="jacket">
		<div id="binder" class="fluid max-1782 xlarge">
			<!-- CONTENT -->
			<main>
			<!-- Responsive Sections -->
			<section class="row side-right gutter pad short">
			
				<div class="column one">
					<article class="wrapper markdown-body">
					

<h1 id="how-does-this-function">How does this function</h1>
<p>The server builder works by using a combination of deployment and task applications to create a LEMP stack with the application layer installed.  The goal is to allow for one configuration to define the whole stack.  The project is set up so that we work backwards from one file that describes everything about the server stack and projects loaded on the server stack.  In order to make this happen we start by parting out the whole process into two sections.</p>
<ol>
<li>Set up the Server</li>
<li>Set up the Applications</li>
</ol>
<p>This provides the line on where you create your application repository verse this repository.  The application repository would have many of the same parts as this server base, and extends the setup accordingly.  The <code>server_project.conf</code> file is a <code>JSON</code> object that describes a deployment for production, and variants for a local version of the production servers.  To create the local server, <code>Vagrant</code> is used with <code>VirturalBox</code>.  This needs to have a <code>Vagrant</code> file that describes the instance parameters and actions that will occur when it&#39;s brought up.  The server it&#39;s self is provisioned with <code>Salt</code> and versioned with <code>Gitploy</code> via <code>git</code>.  <code>Salt</code> uses <code>pillar</code> files to describe what will be done on the server.  This project takes 2 steps with <code>Salt</code> to first set up the server base that is meant to cover all the needs of most any application layer, and if needed, the collated needs from the application object defined in the <code>server_project.conf</code>  file versioned in.  This is the overview of what needs to happen.</p>
<h2 id="process-steps">Process steps</h2>
<h4 id="when-local">When local</h4>
<ol>
<li>Use Grunt to prepare the repo folder and anything needed to get the <code>Vagrant</code> setup ready based on the <code>server_project.conf</code> file</li>
<li>As the box is brought up, the production steps are now run, with symlinks for the application folder on the box.  Otherwise just a <code>EVN</code> flag is set to denote the local server.  Everything else is run the same as the production process.</li>
</ol>
<h4 id="when-non-local">When non-local</h4>
<ol>
<li>a <code>bootstrap.sh</code> file is called, which provides an install of items needed on a server.</li>
<li>It then creates the server object and from that id&#39;s any apps that need to be versioned in.</li>
<li>Once that is done it calls for the salt pillar builder for both the server and apps loaded</li>
<li>After the building of all the pillars based on the <code>server_project.conf</code> file it will run the salt states</li>
</ol>
<p>That is the broad stoke on all of the steps that happen in the build.  This basically simplifies the build by keeping one json config file that describes everything across all of the different technologies.  It uses <code>Grunt</code> on <code>node.js</code> to build all of the settings for both Vagrant and Salt producing the closest matching set of servers for a developer.</p>

</article>
				</div><!--/column-->
			
				<div class="column two">
					<aside>
						<section>
						<h2 id="download-this-project">Download this project</h2>

<ul>
	<li> <a id="repo_github_link" href="https://github.com/jeremyBass/server_builder">View On GitHub</a> </li>
	<li> <a href="https://github.com/jeremyBass/server_builder/zipball/master">Download ZIP</a> </li>
	<li> <a href="https://github.com/jeremyBass/server_builder/tarball/master">Download TAR</a> </li>
</ul>

<p>This project is maintained by <a href="https://github.com/jeremyBass">jeremyBass</a>.  If you have found an issue please report it in the <a href="https://github.com/jeremyBass/server_builder/issues">repo issue list</a>.  </p>

</section>
					</aside>
				</div><!--/column-->
			</section>
			</main>
			<!-- /CONTENT -->
				<!-- SPINE -->
	<div id="spine" class="shelved">
		<div id="glue" class="spine-glue">
		
			<header class="spine-header">
				<a href="http://www.wsu.edu/" id="wsu-signature" class="spine-signature">Washington State University</a>
			</header>
			
			<!-- ACTIONS -->
			<section id="wsu-actions" class="spine-actions">
				<!-- Tabs -->
				<ul id="wsu-actions-tabs" class="spine-actions-tabs clearfix">
					<!--<li id="wsu-search-tab" class="spine-search-tab closed"><button>Search</button></li>
					This will be taken out for the mean time, but will add it back in later.
					-->
					<li id="wsu-contact-tab" class="spine-contact-tab closed"><button>Contact</button></li>
					<li id="wsu-share-tab" class="spine-share-tab closed"><button>Share</button></li>
					<li id="wsu-print-tab" class="spine-print-tab closed"><button>Print</button></li>
				</ul>
			</section><!--/#wsu-actions-->
	
			<nav id="spine-navigation" class="spine-navigation">
				<nav id="spine-sitenav" class="spine-sitenav">
					<ul>
					<li>
						<a href="site/under_the_hood.html" class="active" >Under The Hood</a>
								<ul>
							<li><a href="Overview">#how-does-this-function</a></li>
							<li><a href="Local">#when-local</a></li>
							<li><a href="Non Local">#when-non-local</a></li>
							
								</ul>
							
						</li>
					
					<li>
						<a href="site/server_project_conf.html" >Provisioning Configuration</a>
								<ul>
							
								</ul>
							
						</li>
					
					
						<li><a href="" >Main default</a></li>
					</ul>
				</nav>
				<nav id="spine-offsitenav" class="spine-offsitenav">
					<ul>
						<li><a href="//washingtonstateuniversity.github.io/WSU-Web-Serverbase/">WSU Server base</a></li>
					</ul>
				</nav>
			</nav><!-- #navigation -->
	
			<!-- Social and Global Links -->
			<footer class="spine-footer">
				<!--<nav id="wsu-social-channels" class="spine-social-channels">
					<ul>
						<li id="facebook"><a href="http://facebook.com/wsupullman">Facebook</a></li>
						<li id="twitter"><a href="http://twitter.com/wsupullman">Twitter</a></li>
						<li id="youtube"><a href="http://www.youtube.com/washingtonstateuniv">YouTube</a></li>
						<li id="directory"><a href="http://social.wsu.edu">Social</a></li>
					</ul>
				</nav>-->
				<nav id="wsu-global-links" class="spine-global-links">
					<ul>
						<li id="zzusis"><a href="https://my.wsu.edu/">my<strong>WSU</strong></a></li>
						<li id="access"><a href="https://oeo.wsu.edu/">Access</a></li>
						<li id="policies"><a href="https://policies.wsu.edu/">Policies</a></li>
						<li id="copyright"><a href="https://ucomm.wsu.edu/wsu-copyright-policy/">&copy;</a></li>
					</ul>
				</nav>	
				<!-- <small id="copyright"><a href="http://copyright.wsu.edu">&copy; Washington State University</a></small> -->
			</footer>
	
		</div><!--/glue-->
	</div><!--/spine-->
	<!-- /SPINE -->
</div><!--/cover-->
	</div><!--/jacket-->
	<!-- /WRAPPING -->
	
<!-- CONTACT INFO: Adjust the sample contact info below to reflect appropriate contact information. -->
<div id="contact-details" itemscope itemtype="http://schema.org/Organization"> 
	<span itemprop="department"  content="University Communications"></span> 
	<span itemprop="name" content="Washington State University"></span> 
	<div itemprop="address" itemscope itemtype="http://schema.org/PostalAddress">
		<span itemprop="location" content="ITB"></span>
		<span itemprop="streetAddress" content="ITB"></span>
		<span itemprop="addressLocality" content="Pullman"></span>
		<span itemprop="addressRegion" content="WA"></span>
		<span itemprop="postalCode" content="99164"></span>
	</div>
	<span itemprop="telephone" content="(509) 335-2700"></span>
	<span itemprop="email" content="web.support@wsu.edu"></span>
	<span itemprop="contactPoint" content="https://ucomm.wsu.edu/contact/"></span>
	<span itemprop="url" content="https://github.com/washingtonstateuniversity"></span>
</div>

<script type='text/javascript'>
  /* <![CDATA[ */
  var wsu_analytics = {
    "wsuglobal":{
      "unit_type":"office", 
      "unit":"finance-and-administration",
      "subunit":"information-services",
    },
    "site":{
      "ga_code":"UA-69906812-12"
    }
  };
  /* ]]> */
</script>
<script id="tracker_agent" src="https://repo.wsu.edu/jtrack/develop/bootstrap/bootstrap.min.js"></script></body>
</html>